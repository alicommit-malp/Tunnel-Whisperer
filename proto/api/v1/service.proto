syntax = "proto3";

package api.v1;

option go_package = "github.com/tunnelwhisperer/tw/internal/api";

service TunnelWhisperer {
  rpc GetStatus (StatusRequest) returns (StatusResponse);
  rpc DeployRelay (DeployRelayRequest) returns (DeployRelayResponse);
  rpc ListTunnels (ListTunnelsRequest) returns (ListTunnelsResponse);
}

message StatusRequest {}

message StatusResponse {
  string status = 1;
  string config_dir = 2;
}

message DeployRelayRequest {
  string domain = 1;
}

message DeployRelayResponse {
  string message = 1;
}

message ListTunnelsRequest {}

message ListTunnelsResponse {
  repeated TunnelInfo tunnels = 1;
}

message TunnelInfo {
  string name = 1;
  string status = 2;
}
